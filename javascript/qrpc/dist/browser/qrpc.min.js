(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.qrpc=f()}})(function(){var define,module,exports;return function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r}()({1:[function(require,module,exports){(function(Buffer){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};var __generator=this&&this.__generator||function(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break}if(t[2])_.ops.pop();_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e];y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true}}};var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result["default"]=mod;return result};Object.defineProperty(exports,"__esModule",{value:true});var msgpack=__importStar(require("msgpack-lite"));function errable(p){return p.then(function(ret){return[ret,null]}).catch(function(err){return[null,err]})}function sleep(ms){return new Promise(function(res){return setTimeout(res,ms)})}function loopYield(name){return Promise.resolve()}var FrameCodec=function(){function FrameCodec(channel,readLimit){if(readLimit===void 0){readLimit=-1}this.channel=channel;this.codec=msgpack;this.buf=[];this.waiters=[];this.readLimit=readLimit;this.readCount=0;this.readLoop()}FrameCodec.prototype.readLoop=function(){return __awaiter(this,void 0,void 0,function(){var sbuf,sdata,size,buf,v,e_1;return __generator(this,function(_a){switch(_a.label){case 0:if(!true)return[3,7];if(this.readLimit>0&&this.readCount>=this.readLimit){return[2]}_a.label=1;case 1:_a.trys.push([1,5,,6]);return[4,loopYield("readloop")];case 2:_a.sent();return[4,this.channel.read(4)];case 3:sbuf=_a.sent();if(sbuf===undefined){return[2]}sdata=new DataView(new Uint8Array(sbuf).buffer);size=sdata.getUint32(0);return[4,this.channel.read(size)];case 4:buf=_a.sent();if(buf===undefined){return[2]}this.readCount++;v=this.codec.decode(buf);if(this.waiters.length>0){this.waiters.shift()(v);return[3,0]}this.buf.push(v);return[3,6];case 5:e_1=_a.sent();throw new Error("codec readLoop: "+e_1);case 6:return[3,0];case 7:return[2]}})})};FrameCodec.prototype.encode=function(v){return __awaiter(this,void 0,void 0,function(){var buf,sdata;return __generator(this,function(_a){switch(_a.label){case 0:buf=this.codec.encode(v);sdata=new DataView(new ArrayBuffer(4));sdata.setUint32(0,buf.length);return[4,this.channel.write(Buffer.from(sdata.buffer))];case 1:_a.sent();return[4,this.channel.write(buf)];case 2:_a.sent();return[2,Promise.resolve()]}})})};FrameCodec.prototype.decode=function(){var _this=this;return new Promise(function(resolve,reject){if(_this.buf.length>0){resolve(_this.buf.shift());return}_this.waiters.push(resolve)})};return FrameCodec}();var API=function(){function API(){this.handlers={}}API.prototype.handle=function(path,handler){this.handlers[path]=handler};API.prototype.handleFunc=function(path,handler){var _this=this;this.handle(path,{serveRPC:function(rr,cc){return __awaiter(_this,void 0,void 0,function(){return __generator(this,function(_a){switch(_a.label){case 0:return[4,handler(rr,cc)];case 1:_a.sent();return[2]}})})}})};API.prototype.handler=function(path){for(var p in this.handlers){if(this.handlers.hasOwnProperty(p)){if(path.startsWith(p)){return this.handlers[p]}}}};API.prototype.serveAPI=function(session,ch){return __awaiter(this,void 0,void 0,function(){var codec,cdata,call,header,resp,handler;return __generator(this,function(_a){switch(_a.label){case 0:codec=new FrameCodec(ch);return[4,codec.decode()];case 1:cdata=_a.sent();call=new Call(cdata.Destination);call.parse();call.decode=function(){return codec.decode()};call.caller=new Client(session);header=new ResponseHeader;resp=new responder(ch,codec,header);handler=this.handler(call.Destination);if(!handler){resp.return(new Error("handler does not exist for this destination: "+call.Destination));return[2]}return[4,handler.serveRPC(resp,call)];case 2:_a.sent();return[2,Promise.resolve()]}})})};return API}();exports.API=API;var responder=function(){function responder(ch,codec,header){this.ch=ch;this.codec=codec;this.header=header}responder.prototype.return=function(v){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){switch(_a.label){case 0:if(v instanceof Error){this.header.Error=v.message;v=null}return[4,this.codec.encode(this.header)];case 1:_a.sent();return[4,this.codec.encode(v)];case 2:_a.sent();return[2,this.ch.close()]}})})};responder.prototype.hijack=function(v){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){switch(_a.label){case 0:if(v instanceof Error){this.header.Error=v.message;v=null}this.header.Hijacked=true;return[4,this.codec.encode(this.header)];case 1:_a.sent();return[4,this.codec.encode(v)];case 2:_a.sent();return[2,this.ch]}})})};return responder}();var ResponseHeader=function(){function ResponseHeader(){}return ResponseHeader}();var Response=function(){function Response(){}return Response}();var Call=function(){function Call(Destination){this.Destination=Destination}Call.prototype.parse=function(){if(this.Destination.length===0){throw new Error("no destination specified")}if(this.Destination[0]=="/"){this.Destination=this.Destination.substr(1)}var parts=this.Destination.split("/");if(parts.length===1){this.objectPath="/";this.method=parts[0];return}this.method=parts.pop();this.objectPath=parts.join("/")};return Call}();exports.Call=Call;var Client=function(){function Client(session,api){this.session=session;this.api=api}Client.prototype.serveAPI=function(){return __awaiter(this,void 0,void 0,function(){var ch;return __generator(this,function(_a){switch(_a.label){case 0:if(this.api===undefined){this.api=new API}_a.label=1;case 1:if(!true)return[3,4];return[4,this.session.accept()];case 2:ch=_a.sent();if(ch===undefined){return[2]}this.api.serveAPI(this.session,ch);return[4,loopYield("client channel accept loop")];case 3:_a.sent();return[3,1];case 4:return[2]}})})};Client.prototype.close=function(){return this.session.close()};Client.prototype.call=function(path,args){return __awaiter(this,void 0,void 0,function(){var ch,codec,header,resp,_a,e_2;return __generator(this,function(_b){switch(_b.label){case 0:_b.trys.push([0,10,,12]);return[4,this.session.open()];case 1:ch=_b.sent();codec=new FrameCodec(ch,2);return[4,codec.encode(new Call(path))];case 2:_b.sent();return[4,codec.encode(args)];case 3:_b.sent();return[4,codec.decode()];case 4:header=_b.sent();if(!(header.Error!==undefined&&header.Error!==null))return[3,6];return[4,ch.close()];case 5:_b.sent();return[2,Promise.reject(header.Error)];case 6:resp=new Response;resp.error=header.Error;resp.hijacked=header.Hijacked;resp.channel=ch;_a=resp;return[4,codec.decode()];case 7:_a.reply=_b.sent();if(!(resp.hijacked!==true))return[3,9];return[4,ch.close()];case 8:_b.sent();_b.label=9;case 9:return[2,resp];case 10:e_2=_b.sent();return[4,ch.close()];case 11:_b.sent();console.error(e_2);return[3,12];case 12:return[2]}})})};return Client}();exports.Client=Client;var Server=function(){function Server(){}Server.prototype.serveAPI=function(sess){return __awaiter(this,void 0,void 0,function(){var ch;return __generator(this,function(_a){switch(_a.label){case 0:if(!true)return[3,3];return[4,sess.accept()];case 1:ch=_a.sent();if(ch===undefined){sess.close();return[2]}this.API.serveAPI(sess,ch);return[4,loopYield("server channel accept loop")];case 2:_a.sent();return[3,0];case 3:return[2]}})})};Server.prototype.serve=function(l,api){return __awaiter(this,void 0,void 0,function(){var sess;return __generator(this,function(_a){switch(_a.label){case 0:if(api){this.API=api}if(!this.API){this.API=new API}_a.label=1;case 1:if(!true)return[3,4];return[4,l.accept()];case 2:sess=_a.sent();if(sess===undefined){return[2]}this.serveAPI(sess);return[4,loopYield("server connection accept loop")];case 3:_a.sent();return[3,1];case 4:return[2]}})})};return Server}();exports.Server=Server;function exportFunc(fn,rcvr){return{serveRPC:function(r,c){return __awaiter(this,void 0,void 0,function(){var args,_a,_b,e_3;return __generator(this,function(_c){switch(_c.label){case 0:return[4,c.decode()];case 1:args=_c.sent();_c.label=2;case 2:_c.trys.push([2,4,,5]);_b=(_a=r).return;return[4,fn.apply(rcvr,[args])];case 3:_b.apply(_a,[_c.sent()||null]);return[3,5];case 4:e_3=_c.sent();switch(typeof e_3){case"string":r.return(new Error(e_3));case"undefined":r.return(new Error("unknown error"));case"object":r.return(new Error(e_3.message));default:r.return(new Error("unknown error: "+e_3))}return[3,5];case 5:return[2]}})})}}}function Export(v){if(typeof v==="function"){return exportFunc(v,null)}if(typeof v!="object"){throw new Error("can only export functions and objects")}var handlers={};if(v.constructor.name==="Object"){for(var key in v){if(v.hasOwnProperty(key)&&typeof v[key]==="function"){handlers[key]=exportFunc(v[key],v)}}}else{var props=Object.getOwnPropertyNames(Object.getPrototypeOf(v));for(var idx in props){var propName=props[idx];if(propName!="constructor"&&typeof v[propName]==="function"){handlers[propName]=exportFunc(v[propName],v)}}}return{serveRPC:function(r,c){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){switch(_a.label){case 0:if(!handlers.hasOwnProperty(c.method)){r.return(new Error("method handler does not exist for this destination: "+c.method));return[2]}return[4,handlers[c.method].serveRPC(r,c)];case 1:_a.sent();return[2]}})})}}}exports.Export=Export;function uuid4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(cc){var rr=Math.random()*16|0;return(cc==="x"?rr:rr&3|8).toString(16)})}var ObjectManager=function(){function ObjectManager(){this.values={};this.mountPath="/"}ObjectManager.prototype.object=function(path){var id=path.replace(this.mountPath,"");if(id[0]==="/"){id=id.substr(1)}var v=this.values[id];if(!v){return undefined}return new ManagedObject(this,id,v)};ObjectManager.prototype.register=function(v){var id=uuid4();this.values[id]=v;return new ManagedObject(this,id,v)};ObjectManager.prototype.serveRPC=function(r,c){return __awaiter(this,void 0,void 0,function(){var parts,id,v;return __generator(this,function(_a){parts=c.objectPath.split("/");id=parts.pop();v=this.values[id];if(!v){r.return(new Error("object not registered: "+c.objectPath));return[2]}if(typeof v.serveRPC==="function"){v.serveRPC(r,c)}else{Export(v).serveRPC(r,c)}return[2]})})};ObjectManager.prototype.mount=function(api,path){this.mountPath=path;api.handle(path,this)};return ObjectManager}();exports.ObjectManager=ObjectManager;var ManagedObject=function(){function ManagedObject(manager,id,value){this.manager=manager;this.id=id;this.value=value}ManagedObject.prototype.dispose=function(){delete this.manager.values[this.id]};ManagedObject.prototype.path=function(){return[this.manager.mountPath,this.id].join("/")};ManagedObject.prototype.handle=function(){return{ObjectPath:this.path()}};return ManagedObject}()}).call(this,require("buffer").Buffer)},{buffer:3,"msgpack-lite":8}],2:[function(require,module,exports){"use strict";exports.byteLength=byteLength;exports.toByteArray=toByteArray;exports.fromByteArray=fromByteArray;var lookup=[];var revLookup=[];var Arr=typeof Uint8Array!=="undefined"?Uint8Array:Array;var code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i){lookup[i]=code[i];revLookup[code.charCodeAt(i)]=i}revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(b64){var len=b64.length;if(len%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var validLen=b64.indexOf("=");if(validLen===-1)validLen=len;var placeHoldersLen=validLen===len?0:4-validLen%4;return[validLen,placeHoldersLen]}function byteLength(b64){var lens=getLens(b64);var validLen=lens[0];var placeHoldersLen=lens[1];return(validLen+placeHoldersLen)*3/4-placeHoldersLen}function _byteLength(b64,validLen,placeHoldersLen){return(validLen+placeHoldersLen)*3/4-placeHoldersLen}function toByteArray(b64){var tmp;var lens=getLens(b64);var validLen=lens[0];var placeHoldersLen=lens[1];var arr=new Arr(_byteLength(b64,validLen,placeHoldersLen));var curByte=0;var len=placeHoldersLen>0?validLen-4:validLen;for(var i=0;i<len;i+=4){tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)];arr[curByte++]=tmp>>16&255;arr[curByte++]=tmp>>8&255;arr[curByte++]=tmp&255}if(placeHoldersLen===2){tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4;arr[curByte++]=tmp&255}if(placeHoldersLen===1){tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2;arr[curByte++]=tmp>>8&255;arr[curByte++]=tmp&255}return arr}function tripletToBase64(num){return lookup[num>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[num&63]}function encodeChunk(uint8,start,end){var tmp;var output=[];for(var i=start;i<end;i+=3){tmp=(uint8[i]<<16&16711680)+(uint8[i+1]<<8&65280)+(uint8[i+2]&255);output.push(tripletToBase64(tmp))}return output.join("")}function fromByteArray(uint8){var tmp;var len=uint8.length;var extraBytes=len%3;var parts=[];var maxChunkLength=16383;for(var i=0,len2=len-extraBytes;i<len2;i+=maxChunkLength){parts.push(encodeChunk(uint8,i,i+maxChunkLength>len2?len2:i+maxChunkLength))}if(extraBytes===1){tmp=uint8[len-1];parts.push(lookup[tmp>>2]+lookup[tmp<<4&63]+"==")}else if(extraBytes===2){tmp=(uint8[len-2]<<8)+uint8[len-1];parts.push(lookup[tmp>>10]+lookup[tmp>>4&63]+lookup[tmp<<2&63]+"=")}return parts.join("")}},{}],3:[function(require,module,exports){"use strict";var base64=require("base64-js");var ieee754=require("ieee754");exports.Buffer=Buffer;exports.SlowBuffer=SlowBuffer;exports.INSPECT_MAX_BYTES=50;var K_MAX_LENGTH=2147483647;exports.kMaxLength=K_MAX_LENGTH;Buffer.TYPED_ARRAY_SUPPORT=typedArraySupport();if(!Buffer.TYPED_ARRAY_SUPPORT&&typeof console!=="undefined"&&typeof console.error==="function"){console.error("This browser lacks typed array (Uint8Array) support which is required by "+"`buffer` v5.x. Use `buffer` v4.x if you require old browser support.")}function typedArraySupport(){try{var arr=new Uint8Array(1);arr.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return arr.foo()===42}catch(e){return false}}Object.defineProperty(Buffer.prototype,"parent",{enumerable:true,get:function(){if(!Buffer.isBuffer(this))return undefined;return this.buffer}});Object.defineProperty(Buffer.prototype,"offset",{enumerable:true,get:function(){if(!Buffer.isBuffer(this))return undefined;return this.byteOffset}});function createBuffer(length){if(length>K_MAX_LENGTH){throw new RangeError('The value "'+length+'" is invalid for option "size"')}var buf=new Uint8Array(length);buf.__proto__=Buffer.prototype;return buf}function Buffer(arg,encodingOrOffset,length){if(typeof arg==="number"){if(typeof encodingOrOffset==="string"){throw new TypeError('The "string" argument must be of type string. Received type number')}return allocUnsafe(arg)}return from(arg,encodingOrOffset,length)}if(typeof Symbol!=="undefined"&&Symbol.species!=null&&Buffer[Symbol.species]===Buffer){Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:true,enumerable:false,writable:false})}Buffer.poolSize=8192;function from(value,encodingOrOffset,length){if(typeof value==="string"){return fromString(value,encodingOrOffset)}if(ArrayBuffer.isView(value)){return fromArrayLike(value)}if(value==null){throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof value)}if(isInstance(value,ArrayBuffer)||value&&isInstance(value.buffer,ArrayBuffer)){return fromArrayBuffer(value,encodingOrOffset,length)}if(typeof value==="number"){throw new TypeError('The "value" argument must not be of type number. Received type number')}var valueOf=value.valueOf&&value.valueOf();if(valueOf!=null&&valueOf!==value){return Buffer.from(valueOf,encodingOrOffset,length)}var b=fromObject(value);if(b)return b;if(typeof Symbol!=="undefined"&&Symbol.toPrimitive!=null&&typeof value[Symbol.toPrimitive]==="function"){return Buffer.from(value[Symbol.toPrimitive]("string"),encodingOrOffset,length)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof value)}Buffer.from=function(value,encodingOrOffset,length){return from(value,encodingOrOffset,length)};Buffer.prototype.__proto__=Uint8Array.prototype;Buffer.__proto__=Uint8Array;function assertSize(size){if(typeof size!=="number"){throw new TypeError('"size" argument must be of type number')}else if(size<0){throw new RangeError('The value "'+size+'" is invalid for option "size"')}}function alloc(size,fill,encoding){assertSize(size);if(size<=0){return createBuffer(size)}if(fill!==undefined){return typeof encoding==="string"?createBuffer(size).fill(fill,encoding):createBuffer(size).fill(fill)}return createBuffer(size)}Buffer.alloc=function(size,fill,encoding){return alloc(size,fill,encoding)};function allocUnsafe(size){assertSize(size);return createBuffer(size<0?0:checked(size)|0)}Buffer.allocUnsafe=function(size){return allocUnsafe(size)};Buffer.allocUnsafeSlow=function(size){return allocUnsafe(size)};function fromString(string,encoding){if(typeof encoding!=="string"||encoding===""){encoding="utf8"}if(!Buffer.isEncoding(encoding)){throw new TypeError("Unknown encoding: "+encoding)}var length=byteLength(string,encoding)|0;var buf=createBuffer(length);var actual=buf.write(string,encoding);if(actual!==length){buf=buf.slice(0,actual)}return buf}function fromArrayLike(array){var length=array.length<0?0:checked(array.length)|0;var buf=createBuffer(length);for(var i=0;i<length;i+=1){buf[i]=array[i]&255}return buf}function fromArrayBuffer(array,byteOffset,length){if(byteOffset<0||array.byteLength<byteOffset){throw new RangeError('"offset" is outside of buffer bounds')}if(array.byteLength<byteOffset+(length||0)){throw new RangeError('"length" is outside of buffer bounds')}var buf;if(byteOffset===undefined&&length===undefined){buf=new Uint8Array(array)}else if(length===undefined){buf=new Uint8Array(array,byteOffset)}else{buf=new Uint8Array(array,byteOffset,length)}buf.__proto__=Buffer.prototype;return buf}function fromObject(obj){if(Buffer.isBuffer(obj)){var len=checked(obj.length)|0;var buf=createBuffer(len);if(buf.length===0){return buf}obj.copy(buf,0,0,len);return buf}if(obj.length!==undefined){if(typeof obj.length!=="number"||numberIsNaN(obj.length)){return createBuffer(0)}return fromArrayLike(obj)}if(obj.type==="Buffer"&&Array.isArray(obj.data)){return fromArrayLike(obj.data)}}function checked(length){if(length>=K_MAX_LENGTH){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+K_MAX_LENGTH.toString(16)+" bytes")}return length|0}function SlowBuffer(length){if(+length!=length){length=0}return Buffer.alloc(+length)}Buffer.isBuffer=function isBuffer(b){return b!=null&&b._isBuffer===true&&b!==Buffer.prototype};Buffer.compare=function compare(a,b){if(isInstance(a,Uint8Array))a=Buffer.from(a,a.offset,a.byteLength);if(isInstance(b,Uint8Array))b=Buffer.from(b,b.offset,b.byteLength);if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b)){throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array')}if(a===b)return 0;var x=a.length;var y=b.length;for(var i=0,len=Math.min(x,y);i<len;++i){if(a[i]!==b[i]){x=a[i];y=b[i];break}}if(x<y)return-1;if(y<x)return 1;return 0};Buffer.isEncoding=function isEncoding(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};Buffer.concat=function concat(list,length){if(!Array.isArray(list)){throw new TypeError('"list" argument must be an Array of Buffers')}if(list.length===0){return Buffer.alloc(0)}var i;if(length===undefined){length=0;for(i=0;i<list.length;++i){length+=list[i].length}}var buffer=Buffer.allocUnsafe(length);var pos=0;for(i=0;i<list.length;++i){var buf=list[i];if(isInstance(buf,Uint8Array)){buf=Buffer.from(buf)}if(!Buffer.isBuffer(buf)){throw new TypeError('"list" argument must be an Array of Buffers')}buf.copy(buffer,pos);pos+=buf.length}return buffer};function byteLength(string,encoding){if(Buffer.isBuffer(string)){return string.length}if(ArrayBuffer.isView(string)||isInstance(string,ArrayBuffer)){return string.byteLength}if(typeof string!=="string"){throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. '+"Received type "+typeof string)}var len=string.length;var mustMatch=arguments.length>2&&arguments[2]===true;if(!mustMatch&&len===0)return 0;var loweredCase=false;for(;;){switch(encoding){case"ascii":case"latin1":case"binary":return len;case"utf8":case"utf-8":return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return len*2;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase){return mustMatch?-1:utf8ToBytes(string).length}encoding=(""+encoding).toLowerCase();loweredCase=true}}}Buffer.byteLength=byteLength;function slowToString(encoding,start,end){var loweredCase=false;if(start===undefined||start<0){start=0}if(start>this.length){return""}if(end===undefined||end>this.length){end=this.length}if(end<=0){return""}end>>>=0;start>>>=0;if(end<=start){return""}if(!encoding)encoding="utf8";while(true){switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"latin1":case"binary":return latin1Slice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase();loweredCase=true}}}Buffer.prototype._isBuffer=true;function swap(b,n,m){var i=b[n];b[n]=b[m];b[m]=i}Buffer.prototype.swap16=function swap16(){var len=this.length;if(len%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var i=0;i<len;i+=2){swap(this,i,i+1)}return this};Buffer.prototype.swap32=function swap32(){var len=this.length;if(len%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var i=0;i<len;i+=4){swap(this,i,i+3);swap(this,i+1,i+2)}return this};Buffer.prototype.swap64=function swap64(){var len=this.length;if(len%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var i=0;i<len;i+=8){swap(this,i,i+7);swap(this,i+1,i+6);swap(this,i+2,i+5);swap(this,i+3,i+4)}return this};Buffer.prototype.toString=function toString(){var length=this.length;if(length===0)return"";if(arguments.length===0)return utf8Slice(this,0,length);return slowToString.apply(this,arguments)};Buffer.prototype.toLocaleString=Buffer.prototype.toString;Buffer.prototype.equals=function equals(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");if(this===b)return true;return Buffer.compare(this,b)===0};Buffer.prototype.inspect=function inspect(){var str="";var max=exports.INSPECT_MAX_BYTES;str=this.toString("hex",0,max).replace(/(.{2})/g,"$1 ").trim();if(this.length>max)str+=" ... ";return"<Buffer "+str+">"};Buffer.prototype.compare=function compare(target,start,end,thisStart,thisEnd){if(isInstance(target,Uint8Array)){target=Buffer.from(target,target.offset,target.byteLength)}if(!Buffer.isBuffer(target)){throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. '+"Received type "+typeof target)}if(start===undefined){start=0}if(end===undefined){end=target?target.length:0}if(thisStart===undefined){thisStart=0}if(thisEnd===undefined){thisEnd=this.length}if(start<0||end>target.length||thisStart<0||thisEnd>this.length){throw new RangeError("out of range index")}if(thisStart>=thisEnd&&start>=end){return 0}if(thisStart>=thisEnd){return-1}if(start>=end){return 1}start>>>=0;end>>>=0;thisStart>>>=0;thisEnd>>>=0;if(this===target)return 0;var x=thisEnd-thisStart;var y=end-start;var len=Math.min(x,y);var thisCopy=this.slice(thisStart,thisEnd);var targetCopy=target.slice(start,end);for(var i=0;i<len;++i){if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i];y=targetCopy[i];break}}if(x<y)return-1;if(y<x)return 1;return 0};function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(buffer.length===0)return-1;if(typeof byteOffset==="string"){encoding=byteOffset;byteOffset=0}else if(byteOffset>2147483647){byteOffset=2147483647}else if(byteOffset<-2147483648){byteOffset=-2147483648}byteOffset=+byteOffset;if(numberIsNaN(byteOffset)){byteOffset=dir?0:buffer.length-1}if(byteOffset<0)byteOffset=buffer.length+byteOffset;if(byteOffset>=buffer.length){if(dir)return-1;else byteOffset=buffer.length-1}else if(byteOffset<0){if(dir)byteOffset=0;else return-1}if(typeof val==="string"){val=Buffer.from(val,encoding)}if(Buffer.isBuffer(val)){if(val.length===0){return-1}return arrayIndexOf(buffer,val,byteOffset,encoding,dir)}else if(typeof val==="number"){val=val&255;if(typeof Uint8Array.prototype.indexOf==="function"){if(dir){return Uint8Array.prototype.indexOf.call(buffer,val,byteOffset)}else{return Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset)}}return arrayIndexOf(buffer,[val],byteOffset,encoding,dir)}throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(arr,val,byteOffset,encoding,dir){var indexSize=1;var arrLength=arr.length;var valLength=val.length;if(encoding!==undefined){encoding=String(encoding).toLowerCase();if(encoding==="ucs2"||encoding==="ucs-2"||encoding==="utf16le"||encoding==="utf-16le"){if(arr.length<2||val.length<2){return-1}indexSize=2;arrLength/=2;valLength/=2;byteOffset/=2}}function read(buf,i){if(indexSize===1){return buf[i]}else{return buf.readUInt16BE(i*indexSize)}}var i;if(dir){var foundIndex=-1;for(i=byteOffset;i<arrLength;i++){if(read(arr,i)===read(val,foundIndex===-1?0:i-foundIndex)){if(foundIndex===-1)foundIndex=i;if(i-foundIndex+1===valLength)return foundIndex*indexSize}else{if(foundIndex!==-1)i-=i-foundIndex;foundIndex=-1}}}else{if(byteOffset+valLength>arrLength)byteOffset=arrLength-valLength;for(i=byteOffset;i>=0;i--){var found=true;for(var j=0;j<valLength;j++){if(read(arr,i+j)!==read(val,j)){found=false;break}}if(found)return i}}return-1}Buffer.prototype.includes=function includes(val,byteOffset,encoding){return this.indexOf(val,byteOffset,encoding)!==-1};Buffer.prototype.indexOf=function indexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,true)};Buffer.prototype.lastIndexOf=function lastIndexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,false)};function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;if(!length){length=remaining}else{length=Number(length);if(length>remaining){length=remaining}}var strLen=string.length;if(length>strLen/2){length=strLen/2}for(var i=0;i<length;++i){var parsed=parseInt(string.substr(i*2,2),16);if(numberIsNaN(parsed))return i;buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length)}function latin1Write(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length)}Buffer.prototype.write=function write(string,offset,length,encoding){if(offset===undefined){encoding="utf8";length=this.length;offset=0}else if(length===undefined&&typeof offset==="string"){encoding=offset;length=this.length;offset=0}else if(isFinite(offset)){offset=offset>>>0;if(isFinite(length)){length=length>>>0;if(encoding===undefined)encoding="utf8"}else{encoding=length;length=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var remaining=this.length-offset;if(length===undefined||length>remaining)length=remaining;if(string.length>0&&(length<0||offset<0)||offset>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!encoding)encoding="utf8";var loweredCase=false;for(;;){switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"latin1":case"binary":return latin1Write(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase();loweredCase=true}}};Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(buf,start,end){if(start===0&&end===buf.length){return base64.fromByteArray(buf)}else{return base64.fromByteArray(buf.slice(start,end))}}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);var res=[];var i=start;while(i<end){var firstByte=buf[i];var codePoint=null;var bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end){var secondByte,thirdByte,fourthByte,tempCodePoint;switch(bytesPerSequence){case 1:if(firstByte<128){codePoint=firstByte}break;case 2:secondByte=buf[i+1];if((secondByte&192)===128){tempCodePoint=(firstByte&31)<<6|secondByte&63;if(tempCodePoint>127){codePoint=tempCodePoint}}break;case 3:secondByte=buf[i+1];thirdByte=buf[i+2];if((secondByte&192)===128&&(thirdByte&192)===128){tempCodePoint=(firstByte&15)<<12|(secondByte&63)<<6|thirdByte&63;if(tempCodePoint>2047&&(tempCodePoint<55296||tempCodePoint>57343)){codePoint=tempCodePoint}}break;case 4:secondByte=buf[i+1];thirdByte=buf[i+2];fourthByte=buf[i+3];if((secondByte&192)===128&&(thirdByte&192)===128&&(fourthByte&192)===128){tempCodePoint=(firstByte&15)<<18|(secondByte&63)<<12|(thirdByte&63)<<6|fourthByte&63;if(tempCodePoint>65535&&tempCodePoint<1114112){codePoint=tempCodePoint}}}}if(codePoint===null){codePoint=65533;bytesPerSequence=1}else if(codePoint>65535){codePoint-=65536;res.push(codePoint>>>10&1023|55296);codePoint=56320|codePoint&1023}res.push(codePoint);i+=bytesPerSequence}return decodeCodePointsArray(res)}var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(codePoints){var len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH){return String.fromCharCode.apply(String,codePoints)}var res="";var i=0;while(i<len){res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH))}return res}function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i){ret+=String.fromCharCode(buf[i]&127)}return ret}function latin1Slice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i){ret+=String.fromCharCode(buf[i])}return ret}function hexSlice(buf,start,end){var len=buf.length;if(!start||start<0)start=0;if(!end||end<0||end>len)end=len;var out="";for(var i=start;i<end;++i){out+=toHex(buf[i])}return out}function utf16leSlice(buf,start,end){var bytes=buf.slice(start,end);var res="";for(var i=0;i<bytes.length;i+=2){res+=String.fromCharCode(bytes[i]+bytes[i+1]*256)}return res}Buffer.prototype.slice=function slice(start,end){var len=this.length;start=~~start;end=end===undefined?len:~~end;if(start<0){start+=len;if(start<0)start=0}else if(start>len){start=len}if(end<0){end+=len;if(end<0)end=0}else if(end>len){end=len}if(end<start)end=start;var newBuf=this.subarray(start,end);newBuf.__proto__=Buffer.prototype;return newBuf};function checkOffset(offset,ext,length){if(offset%1!==0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}Buffer.prototype.readUIntLE=function readUIntLE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}return val};Buffer.prototype.readUIntBE=function readUIntBE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert){checkOffset(offset,byteLength,this.length)}var val=this[offset+--byteLength];var mul=1;while(byteLength>0&&(mul*=256)){val+=this[offset+--byteLength]*mul}return val};Buffer.prototype.readUInt8=function readUInt8(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,1,this.length);return this[offset]};Buffer.prototype.readUInt16LE=function readUInt16LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);return this[offset]|this[offset+1]<<8};Buffer.prototype.readUInt16BE=function readUInt16BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);return this[offset]<<8|this[offset+1]};Buffer.prototype.readUInt32LE=function readUInt32LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+this[offset+3]*16777216};Buffer.prototype.readUInt32BE=function readUInt32BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return this[offset]*16777216+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])};Buffer.prototype.readIntLE=function readIntLE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readIntBE=function readIntBE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);var i=byteLength;var mul=1;var val=this[offset+--i];while(i>0&&(mul*=256)){val+=this[offset+--i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readInt8=function readInt8(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,1,this.length);if(!(this[offset]&128))return this[offset];return(255-this[offset]+1)*-1};Buffer.prototype.readInt16LE=function readInt16LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt16BE=function readInt16BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt32LE=function readInt32LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24};Buffer.prototype.readInt32BE=function readInt32BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]};Buffer.prototype.readFloatLE=function readFloatLE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,true,23,4)};Buffer.prototype.readFloatBE=function readFloatBE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,false,23,4)};Buffer.prototype.readDoubleLE=function readDoubleLE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,true,52,8)};Buffer.prototype.readDoubleBE=function readDoubleBE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,false,52,8)};function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(value>max||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError("Index out of range")}Buffer.prototype.writeUIntLE=function writeUIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0)}var mul=1;var i=0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){this[offset+i]=value/mul&255}return offset+byteLength};Buffer.prototype.writeUIntBE=function writeUIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0)}var i=byteLength-1;var mul=1;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){this[offset+i]=value/mul&255}return offset+byteLength};Buffer.prototype.writeUInt8=function writeUInt8(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,1,255,0);this[offset]=value&255;return offset+1};Buffer.prototype.writeUInt16LE=function writeUInt16LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,65535,0);this[offset]=value&255;this[offset+1]=value>>>8;return offset+2};Buffer.prototype.writeUInt16BE=function writeUInt16BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,65535,0);this[offset]=value>>>8;this[offset+1]=value&255;return offset+2};Buffer.prototype.writeUInt32LE=function writeUInt32LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);this[offset+3]=value>>>24;this[offset+2]=value>>>16;this[offset+1]=value>>>8;this[offset]=value&255;return offset+4};Buffer.prototype.writeUInt32BE=function writeUInt32BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&255;return offset+4};Buffer.prototype.writeIntLE=function writeIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0;var mul=1;var sub=0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){if(value<0&&sub===0&&this[offset+i-1]!==0){sub=1}this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer.prototype.writeIntBE=function writeIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1;var mul=1;var sub=0;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){if(value<0&&sub===0&&this[offset+i+1]!==0){sub=1}this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer.prototype.writeInt8=function writeInt8(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,1,127,-128);if(value<0)value=255+value+1;this[offset]=value&255;return offset+1};Buffer.prototype.writeInt16LE=function writeInt16LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);this[offset]=value&255;this[offset+1]=value>>>8;return offset+2};Buffer.prototype.writeInt16BE=function writeInt16BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);this[offset]=value>>>8;this[offset+1]=value&255;return offset+2};Buffer.prototype.writeInt32LE=function writeInt32LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);this[offset]=value&255;this[offset+1]=value>>>8;this[offset+2]=value>>>16;this[offset+3]=value>>>24;return offset+4};Buffer.prototype.writeInt32BE=function writeInt32BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);if(value<0)value=4294967295+value+1;this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&255;return offset+4};function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(offset<0)throw new RangeError("Index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){value=+value;offset=offset>>>0;if(!noAssert){checkIEEE754(buf,value,offset,4,34028234663852886e22,-34028234663852886e22)}ieee754.write(buf,value,offset,littleEndian,23,4);return offset+4}Buffer.prototype.writeFloatLE=function writeFloatLE(value,offset,noAssert){return writeFloat(this,value,offset,true,noAssert)};Buffer.prototype.writeFloatBE=function writeFloatBE(value,offset,noAssert){return writeFloat(this,value,offset,false,noAssert)};function writeDouble(buf,value,offset,littleEndian,noAssert){value=+value;offset=offset>>>0;if(!noAssert){checkIEEE754(buf,value,offset,8,17976931348623157e292,-17976931348623157e292)}ieee754.write(buf,value,offset,littleEndian,52,8);return offset+8}Buffer.prototype.writeDoubleLE=function writeDoubleLE(value,offset,noAssert){return writeDouble(this,value,offset,true,noAssert)};Buffer.prototype.writeDoubleBE=function writeDoubleBE(value,offset,noAssert){return writeDouble(this,value,offset,false,noAssert)};Buffer.prototype.copy=function copy(target,targetStart,start,end){if(!Buffer.isBuffer(target))throw new TypeError("argument should be a Buffer");if(!start)start=0;if(!end&&end!==0)end=this.length;if(targetStart>=target.length)targetStart=target.length;if(!targetStart)targetStart=0;if(end>0&&end<start)end=start;if(end===start)return 0;if(target.length===0||this.length===0)return 0;if(targetStart<0){throw new RangeError("targetStart out of bounds")}if(start<0||start>=this.length)throw new RangeError("Index out of range");if(end<0)throw new RangeError("sourceEnd out of bounds");if(end>this.length)end=this.length;if(target.length-targetStart<end-start){end=target.length-targetStart+start}var len=end-start;if(this===target&&typeof Uint8Array.prototype.copyWithin==="function"){this.copyWithin(targetStart,start,end)}else if(this===target&&start<targetStart&&targetStart<end){for(var i=len-1;i>=0;--i){target[i+targetStart]=this[i+start]}}else{Uint8Array.prototype.set.call(target,this.subarray(start,end),targetStart)}return len};Buffer.prototype.fill=function fill(val,start,end,encoding){if(typeof val==="string"){if(typeof start==="string"){encoding=start;start=0;end=this.length}else if(typeof end==="string"){encoding=end;end=this.length}if(encoding!==undefined&&typeof encoding!=="string"){throw new TypeError("encoding must be a string")}if(typeof encoding==="string"&&!Buffer.isEncoding(encoding)){throw new TypeError("Unknown encoding: "+encoding)}if(val.length===1){var code=val.charCodeAt(0);if(encoding==="utf8"&&code<128||encoding==="latin1"){val=code}}}else if(typeof val==="number"){val=val&255}if(start<0||this.length<start||this.length<end){throw new RangeError("Out of range index")}if(end<=start){return this}start=start>>>0;end=end===undefined?this.length:end>>>0;if(!val)val=0;var i;if(typeof val==="number"){for(i=start;i<end;++i){this[i]=val}}else{var bytes=Buffer.isBuffer(val)?val:Buffer.from(val,encoding);var len=bytes.length;if(len===0){throw new TypeError('The value "'+val+'" is invalid for argument "value"')}for(i=0;i<end-start;++i){this[i+start]=bytes[i%len]}}return this};var INVALID_BASE64_RE=/[^+/0-9A-Za-z-_]/g;function base64clean(str){str=str.split("=")[0];str=str.trim().replace(INVALID_BASE64_RE,"");if(str.length<2)return"";while(str.length%4!==0){str=str+"="}return str}function toHex(n){if(n<16)return"0"+n.toString(16);return n.toString(16)}function utf8ToBytes(string,units){units=units||Infinity;var codePoint;var length=string.length;var leadSurrogate=null;var bytes=[];for(var i=0;i<length;++i){codePoint=string.charCodeAt(i);if(codePoint>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){if((units-=3)>-1)bytes.push(239,191,189);continue}else if(i+1===length){if((units-=3)>-1)bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){if((units-=3)>-1)bytes.push(239,191,189);leadSurrogate=codePoint;continue}codePoint=(leadSurrogate-55296<<10|codePoint-56320)+65536}else if(leadSurrogate){if((units-=3)>-1)bytes.push(239,191,189)}leadSurrogate=null;if(codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,codePoint&63|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,codePoint&63|128)}else if(codePoint<1114112){if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,codePoint&63|128)}else{throw new Error("Invalid code point")}}return bytes}function asciiToBytes(str){var byteArray=[];for(var i=0;i<str.length;++i){byteArray.push(str.charCodeAt(i)&255)}return byteArray}function utf16leToBytes(str,units){var c,hi,lo;var byteArray=[];for(var i=0;i<str.length;++i){if((units-=2)<0)break;c=str.charCodeAt(i);hi=c>>8;lo=c%256;byteArray.push(lo);byteArray.push(hi)}return byteArray}function base64ToBytes(str){return base64.toByteArray(base64clean(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length;++i){if(i+offset>=dst.length||i>=src.length)break;dst[i+offset]=src[i]}return i}function isInstance(obj,type){return obj instanceof type||obj!=null&&obj.constructor!=null&&obj.constructor.name!=null&&obj.constructor.name===type.name}function numberIsNaN(obj){return obj!==obj}},{"base64-js":2,ieee754:5}],4:[function(require,module,exports){function EventLite(){if(!(this instanceof EventLite))return new EventLite}(function(EventLite){if("undefined"!==typeof module)module.exports=EventLite;var LISTENERS="listeners";var methods={on:on,once:once,off:off,emit:emit};mixin(EventLite.prototype);EventLite.mixin=mixin;function mixin(target){for(var key in methods){target[key]=methods[key]}return target}function on(type,func){getListeners(this,type).push(func);return this}function once(type,func){var that=this;wrap.originalListener=func;getListeners(that,type).push(wrap);return that;function wrap(){off.call(that,type,wrap);func.apply(this,arguments)}}function off(type,func){var that=this;var listners;if(!arguments.length){delete that[LISTENERS]}else if(!func){listners=that[LISTENERS];if(listners){delete listners[type];if(!Object.keys(listners).length)return off.call(that)}}else{listners=getListeners(that,type,true);if(listners){listners=listners.filter(ne);if(!listners.length)return off.call(that,type);that[LISTENERS][type]=listners}}return that;function ne(test){return test!==func&&test.originalListener!==func}}function emit(type,value){var that=this;var listeners=getListeners(that,type,true);if(!listeners)return false;var arglen=arguments.length;if(arglen===1){listeners.forEach(zeroarg)}else if(arglen===2){listeners.forEach(onearg)}else{var args=Array.prototype.slice.call(arguments,1);listeners.forEach(moreargs)}return!!listeners.length;function zeroarg(func){func.call(that)}function onearg(func){func.call(that,value)}function moreargs(func){func.apply(that,args)}}function getListeners(that,type,readonly){if(readonly&&!that[LISTENERS])return;var listeners=that[LISTENERS]||(that[LISTENERS]={});return listeners[type]||(listeners[type]=[])}})(EventLite)},{}],5:[function(require,module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var nBits=-7;var i=isLE?nBytes-1:0;var d=isLE?-1:1;var s=buffer[offset+i];i+=d;e=s&(1<<-nBits)-1;s>>=-nBits;nBits+=eLen;for(;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8){}m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8){}if(e===0){e=1-eBias}else if(e===eMax){return m?NaN:(s?-1:1)*Infinity}else{m=m+Math.pow(2,mLen);e=e-eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)};exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var rt=mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0;var i=isLE?0:nBytes-1;var d=isLE?1:-1;var s=value<0||value===0&&1/value<0?1:0;value=Math.abs(value);if(isNaN(value)||value===Infinity){m=isNaN(value)?1:0;e=eMax}else{e=Math.floor(Math.log(value)/Math.LN2);if(value*(c=Math.pow(2,-e))<1){e--;c*=2}if(e+eBias>=1){value+=rt/c}else{value+=rt*Math.pow(2,1-eBias)}if(value*c>=2){e++;c/=2}if(e+eBias>=eMax){m=0;e=eMax}else if(e+eBias>=1){m=(value*c-1)*Math.pow(2,mLen);e=e+eBias}else{m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen);e=0}}for(;mLen>=8;buffer[offset+i]=m&255,i+=d,m/=256,mLen-=8){}e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[offset+i]=e&255,i+=d,e/=256,eLen-=8){}buffer[offset+i-d]|=s*128}},{}],6:[function(require,module,exports){(function(Buffer){var Uint64BE,Int64BE,Uint64LE,Int64LE;!function(exports){var UNDEFINED="undefined";var BUFFER=UNDEFINED!==typeof Buffer&&Buffer;var UINT8ARRAY=UNDEFINED!==typeof Uint8Array&&Uint8Array;var ARRAYBUFFER=UNDEFINED!==typeof ArrayBuffer&&ArrayBuffer;var ZERO=[0,0,0,0,0,0,0,0];var isArray=Array.isArray||_isArray;var BIT32=4294967296;var BIT24=16777216;var storage;Uint64BE=factory("Uint64BE",true,true);Int64BE=factory("Int64BE",true,false);Uint64LE=factory("Uint64LE",false,true);Int64LE=factory("Int64LE",false,false);function factory(name,bigendian,unsigned){var posH=bigendian?0:4;var posL=bigendian?4:0;var pos0=bigendian?0:3;var pos1=bigendian?1:2;var pos2=bigendian?2:1;var pos3=bigendian?3:0;var fromPositive=bigendian?fromPositiveBE:fromPositiveLE;var fromNegative=bigendian?fromNegativeBE:fromNegativeLE;var proto=Int64.prototype;var isName="is"+name;var _isInt64="_"+isName;proto.buffer=void 0;proto.offset=0;proto[_isInt64]=true;proto.toNumber=toNumber;proto.toString=toString;proto.toJSON=toNumber;proto.toArray=toArray;if(BUFFER)proto.toBuffer=toBuffer;if(UINT8ARRAY)proto.toArrayBuffer=toArrayBuffer;Int64[isName]=isInt64;exports[name]=Int64;return Int64;function Int64(buffer,offset,value,raddix){if(!(this instanceof Int64))return new Int64(buffer,offset,value,raddix);return init(this,buffer,offset,value,raddix)}function isInt64(b){return!!(b&&b[_isInt64])}function init(that,buffer,offset,value,raddix){if(UINT8ARRAY&&ARRAYBUFFER){if(buffer instanceof ARRAYBUFFER)buffer=new UINT8ARRAY(buffer);if(value instanceof ARRAYBUFFER)value=new UINT8ARRAY(value)}if(!buffer&&!offset&&!value&&!storage){that.buffer=newArray(ZERO,0);return}if(!isValidBuffer(buffer,offset)){var _storage=storage||Array;raddix=offset;value=buffer;offset=0;buffer=new _storage(8)}that.buffer=buffer;that.offset=offset|=0;if(UNDEFINED===typeof value)return;if("string"===typeof value){fromString(buffer,offset,value,raddix||10)}else if(isValidBuffer(value,raddix)){fromArray(buffer,offset,value,raddix)}else if("number"===typeof raddix){writeInt32(buffer,offset+posH,value);writeInt32(buffer,offset+posL,raddix)}else if(value>0){fromPositive(buffer,offset,value)}else if(value<0){fromNegative(buffer,offset,value)}else{fromArray(buffer,offset,ZERO,0)}}function fromString(buffer,offset,str,raddix){var pos=0;var len=str.length;var high=0;var low=0;if(str[0]==="-")pos++;var sign=pos;while(pos<len){var chr=parseInt(str[pos++],raddix);if(!(chr>=0))break;low=low*raddix+chr;high=high*raddix+Math.floor(low/BIT32);low%=BIT32}if(sign){high=~high;if(low){low=BIT32-low}else{high++}}writeInt32(buffer,offset+posH,high);writeInt32(buffer,offset+posL,low)}function toNumber(){var buffer=this.buffer;var offset=this.offset;var high=readInt32(buffer,offset+posH);var low=readInt32(buffer,offset+posL);if(!unsigned)high|=0;return high?high*BIT32+low:low}function toString(radix){var buffer=this.buffer;var offset=this.offset;var high=readInt32(buffer,offset+posH);var low=readInt32(buffer,offset+posL);var str="";var sign=!unsigned&&high&2147483648;if(sign){high=~high;low=BIT32-low}radix=radix||10;while(1){var mod=high%radix*BIT32+low;high=Math.floor(high/radix);low=Math.floor(mod/radix);str=(mod%radix).toString(radix)+str;if(!high&&!low)break}if(sign){str="-"+str}return str}function writeInt32(buffer,offset,value){buffer[offset+pos3]=value&255;value=value>>8;buffer[offset+pos2]=value&255;value=value>>8;buffer[offset+pos1]=value&255;value=value>>8;buffer[offset+pos0]=value&255}function readInt32(buffer,offset){return buffer[offset+pos0]*BIT24+(buffer[offset+pos1]<<16)+(buffer[offset+pos2]<<8)+buffer[offset+pos3]}}function toArray(raw){var buffer=this.buffer;var offset=this.offset;storage=null;if(raw!==false&&offset===0&&buffer.length===8&&isArray(buffer))return buffer;return newArray(buffer,offset)}function toBuffer(raw){var buffer=this.buffer;var offset=this.offset;storage=BUFFER;if(raw!==false&&offset===0&&buffer.length===8&&Buffer.isBuffer(buffer))return buffer;var dest=new BUFFER(8);fromArray(dest,0,buffer,offset);return dest}function toArrayBuffer(raw){var buffer=this.buffer;var offset=this.offset;var arrbuf=buffer.buffer;storage=UINT8ARRAY;if(raw!==false&&offset===0&&arrbuf instanceof ARRAYBUFFER&&arrbuf.byteLength===8)return arrbuf;var dest=new UINT8ARRAY(8);fromArray(dest,0,buffer,offset);return dest.buffer}function isValidBuffer(buffer,offset){var len=buffer&&buffer.length;offset|=0;return len&&offset+8<=len&&"string"!==typeof buffer[offset]}function fromArray(destbuf,destoff,srcbuf,srcoff){destoff|=0;srcoff|=0;for(var i=0;i<8;i++){destbuf[destoff++]=srcbuf[srcoff++]&255}}function newArray(buffer,offset){return Array.prototype.slice.call(buffer,offset,offset+8)}function fromPositiveBE(buffer,offset,value){var pos=offset+8;while(pos>offset){buffer[--pos]=value&255;value/=256}}function fromNegativeBE(buffer,offset,value){var pos=offset+8;value++;while(pos>offset){buffer[--pos]=-value&255^255;value/=256}}function fromPositiveLE(buffer,offset,value){var end=offset+8;while(offset<end){buffer[offset++]=value&255;value/=256}}function fromNegativeLE(buffer,offset,value){var end=offset+8;value++;while(offset<end){buffer[offset++]=-value&255^255;value/=256}}function _isArray(val){return!!val&&"[object Array]"==Object.prototype.toString.call(val)}}(typeof exports==="object"&&typeof exports.nodeName!=="string"?exports:this||{})}).call(this,require("buffer").Buffer)},{buffer:3}],7:[function(require,module,exports){var toString={}.toString;module.exports=Array.isArray||function(arr){return toString.call(arr)=="[object Array]"}},{}],8:[function(require,module,exports){exports.encode=require("./encode").encode;exports.decode=require("./decode").decode;exports.Encoder=require("./encoder").Encoder;exports.Decoder=require("./decoder").Decoder;exports.createCodec=require("./ext").createCodec;exports.codec=require("./codec").codec},{"./codec":17,"./decode":19,"./decoder":20,"./encode":22,"./encoder":23,"./ext":27}],9:[function(require,module,exports){(function(Buffer){module.exports=c("undefined"!==typeof Buffer&&Buffer)||c(this.Buffer)||c("undefined"!==typeof window&&window.Buffer)||this.Buffer;function c(B){return B&&B.isBuffer&&B}}).call(this,require("buffer").Buffer)},{buffer:3}],10:[function(require,module,exports){var MAXBUFLEN=8192;exports.copy=copy;exports.toString=toString;exports.write=write;function write(string,offset){var buffer=this;var index=offset||(offset|=0);var length=string.length;var chr=0;var i=0;while(i<length){chr=string.charCodeAt(i++);if(chr<128){buffer[index++]=chr}else if(chr<2048){buffer[index++]=192|chr>>>6;buffer[index++]=128|chr&63}else if(chr<55296||chr>57343){buffer[index++]=224|chr>>>12;buffer[index++]=128|chr>>>6&63;buffer[index++]=128|chr&63}else{chr=(chr-55296<<10|string.charCodeAt(i++)-56320)+65536;buffer[index++]=240|chr>>>18;buffer[index++]=128|chr>>>12&63;buffer[index++]=128|chr>>>6&63;buffer[index++]=128|chr&63}}return index-offset}function toString(encoding,start,end){var buffer=this;var index=start|0;if(!end)end=buffer.length;var string="";var chr=0;while(index<end){chr=buffer[index++];if(chr<128){string+=String.fromCharCode(chr);continue}if((chr&224)===192){chr=(chr&31)<<6|buffer[index++]&63}else if((chr&240)===224){chr=(chr&15)<<12|(buffer[index++]&63)<<6|buffer[index++]&63}else if((chr&248)===240){chr=(chr&7)<<18|(buffer[index++]&63)<<12|(buffer[index++]&63)<<6|buffer[index++]&63}if(chr>=65536){chr-=65536;string+=String.fromCharCode((chr>>>10)+55296,(chr&1023)+56320)}else{string+=String.fromCharCode(chr)}}return string}function copy(target,targetStart,start,end){var i;if(!start)start=0;if(!end&&end!==0)end=this.length;if(!targetStart)targetStart=0;var len=end-start;if(target===this&&start<targetStart&&targetStart<end){for(i=len-1;i>=0;i--){target[i+targetStart]=this[i+start]}}else{for(i=0;i<len;i++){target[i+targetStart]=this[i+start]}}return len}},{}],11:[function(require,module,exports){var Bufferish=require("./bufferish");var exports=module.exports=alloc(0);exports.alloc=alloc;exports.concat=Bufferish.concat;exports.from=from;function alloc(size){return new Array(size)}function from(value){if(!Bufferish.isBuffer(value)&&Bufferish.isView(value)){value=Bufferish.Uint8Array.from(value)}else if(Bufferish.isArrayBuffer(value)){value=new Uint8Array(value)}else if(typeof value==="string"){return Bufferish.from.call(exports,value)}else if(typeof value==="number"){throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(value)}},{"./bufferish":15}],12:[function(require,module,exports){var Bufferish=require("./bufferish");var Buffer=Bufferish.global;var exports=module.exports=Bufferish.hasBuffer?alloc(0):[];exports.alloc=Bufferish.hasBuffer&&Buffer.alloc||alloc;exports.concat=Bufferish.concat;exports.from=from;function alloc(size){return new Buffer(size)}function from(value){if(!Bufferish.isBuffer(value)&&Bufferish.isView(value)){value=Bufferish.Uint8Array.from(value)}else if(Bufferish.isArrayBuffer(value)){value=new Uint8Array(value)}else if(typeof value==="string"){return Bufferish.from.call(exports,value)}else if(typeof value==="number"){throw new TypeError('"value" argument must not be a number')}if(Buffer.from&&Buffer.from.length!==1){return Buffer.from(value)}else{return new Buffer(value)}}},{"./bufferish":15}],13:[function(require,module,exports){var BufferLite=require("./buffer-lite");exports.copy=copy;exports.slice=slice;exports.toString=toString;exports.write=gen("write");var Bufferish=require("./bufferish");var Buffer=Bufferish.global;var isBufferShim=Bufferish.hasBuffer&&"TYPED_ARRAY_SUPPORT"in Buffer;var brokenTypedArray=isBufferShim&&!Buffer.TYPED_ARRAY_SUPPORT;function copy(target,targetStart,start,end){var thisIsBuffer=Bufferish.isBuffer(this);var targetIsBuffer=Bufferish.isBuffer(target);if(thisIsBuffer&&targetIsBuffer){return this.copy(target,targetStart,start,end)}else if(!brokenTypedArray&&!thisIsBuffer&&!targetIsBuffer&&Bufferish.isView(this)&&Bufferish.isView(target)){var buffer=start||end!=null?slice.call(this,start,end):this;target.set(buffer,targetStart);return buffer.length}else{return BufferLite.copy.call(this,target,targetStart,start,end)}}function slice(start,end){var f=this.slice||!brokenTypedArray&&this.subarray;if(f)return f.call(this,start,end);var target=Bufferish.alloc.call(this,end-start);copy.call(this,target,0,start,end);return target}function toString(encoding,start,end){var f=!isBufferShim&&Bufferish.isBuffer(this)?this.toString:BufferLite.toString;return f.apply(this,arguments)}function gen(method){return wrap;function wrap(){var f=this[method]||BufferLite[method];return f.apply(this,arguments)}}},{"./buffer-lite":10,"./bufferish":15}],14:[function(require,module,exports){var Bufferish=require("./bufferish");var exports=module.exports=Bufferish.hasArrayBuffer?alloc(0):[];exports.alloc=alloc;exports.concat=Bufferish.concat;exports.from=from;function alloc(size){return new Uint8Array(size)}function from(value){if(Bufferish.isView(value)){var byteOffset=value.byteOffset;var byteLength=value.byteLength;value=value.buffer;if(value.byteLength!==byteLength){if(value.slice){value=value.slice(byteOffset,byteOffset+byteLength)}else{value=new Uint8Array(value);if(value.byteLength!==byteLength){value=Array.prototype.slice.call(value,byteOffset,byteOffset+byteLength)}}}}else if(typeof value==="string"){return Bufferish.from.call(exports,value)}else if(typeof value==="number"){throw new TypeError('"value" argument must not be a number')}return new Uint8Array(value)}},{"./bufferish":15}],15:[function(require,module,exports){var Buffer=exports.global=require("./buffer-global");var hasBuffer=exports.hasBuffer=Buffer&&!!Buffer.isBuffer;var hasArrayBuffer=exports.hasArrayBuffer="undefined"!==typeof ArrayBuffer;var isArray=exports.isArray=require("isarray");exports.isArrayBuffer=hasArrayBuffer?isArrayBuffer:_false;var isBuffer=exports.isBuffer=hasBuffer?Buffer.isBuffer:_false;var isView=exports.isView=hasArrayBuffer?ArrayBuffer.isView||_is("ArrayBuffer","buffer"):_false;exports.alloc=alloc;exports.concat=concat;exports.from=from;var BufferArray=exports.Array=require("./bufferish-array");var BufferBuffer=exports.Buffer=require("./bufferish-buffer");var BufferUint8Array=exports.Uint8Array=require("./bufferish-uint8array");var BufferProto=exports.prototype=require("./bufferish-proto");function from(value){if(typeof value==="string"){return fromString.call(this,value)}else{return auto(this).from(value)}}function alloc(size){return auto(this).alloc(size)}function concat(list,length){if(!length){length=0;Array.prototype.forEach.call(list,dryrun)}var ref=this!==exports&&this||list[0];var result=alloc.call(ref,length);var offset=0;Array.prototype.forEach.call(list,append);return result;function dryrun(buffer){length+=buffer.length}function append(buffer){offset+=BufferProto.copy.call(buffer,result,offset)}}var _isArrayBuffer=_is("ArrayBuffer");function isArrayBuffer(value){return value instanceof ArrayBuffer||_isArrayBuffer(value)}function fromString(value){var expected=value.length*3;var that=alloc.call(this,expected);var actual=BufferProto.write.call(that,value);if(expected!==actual){that=BufferProto.slice.call(that,0,actual)}return that}function auto(that){return isBuffer(that)?BufferBuffer:isView(that)?BufferUint8Array:isArray(that)?BufferArray:hasBuffer?BufferBuffer:hasArrayBuffer?BufferUint8Array:BufferArray}function _false(){return false}function _is(name,key){name="[object "+name+"]";return function(value){return value!=null&&{}.toString.call(key?value[key]:value)===name}}},{"./buffer-global":9,"./bufferish-array":11,"./bufferish-buffer":12,"./bufferish-proto":13,"./bufferish-uint8array":14,isarray:7}],16:[function(require,module,exports){var IS_ARRAY=require("isarray");exports.createCodec=createCodec;exports.install=install;exports.filter=filter;var Bufferish=require("./bufferish");function Codec(options){if(!(this instanceof Codec))return new Codec(options);this.options=options;this.init()}Codec.prototype.init=function(){var options=this.options;if(options&&options.uint8array){this.bufferish=Bufferish.Uint8Array}return this};function install(props){for(var key in props){Codec.prototype[key]=add(Codec.prototype[key],props[key])}}function add(a,b){return a&&b?ab:a||b;function ab(){a.apply(this,arguments);return b.apply(this,arguments)}}function join(filters){filters=filters.slice();return function(value){return filters.reduce(iterator,value)};function iterator(value,filter){return filter(value)}}function filter(filter){return IS_ARRAY(filter)?join(filter):filter}function createCodec(options){return new Codec(options)}exports.preset=createCodec({preset:true})},{"./bufferish":15,isarray:7}],17:[function(require,module,exports){require("./read-core");require("./write-core");exports.codec={preset:require("./codec-base").preset}},{"./codec-base":16,"./read-core":29,"./write-core":32}],18:[function(require,module,exports){exports.DecodeBuffer=DecodeBuffer;var preset=require("./read-core").preset;var FlexDecoder=require("./flex-buffer").FlexDecoder;FlexDecoder.mixin(DecodeBuffer.prototype);function DecodeBuffer(options){if(!(this instanceof DecodeBuffer))return new DecodeBuffer(options);if(options){this.options=options;if(options.codec){var codec=this.codec=options.codec;if(codec.bufferish)this.bufferish=codec.bufferish}}}DecodeBuffer.prototype.codec=preset;DecodeBuffer.prototype.fetch=function(){return this.codec.decode(this)}},{"./flex-buffer":28,"./read-core":29}],19:[function(require,module,exports){exports.decode=decode;var DecodeBuffer=require("./decode-buffer").DecodeBuffer;function decode(input,options){var decoder=new DecodeBuffer(options);decoder.write(input);return decoder.read()}},{"./decode-buffer":18}],20:[function(require,module,exports){exports.Decoder=Decoder;var EventLite=require("event-lite");var DecodeBuffer=require("./decode-buffer").DecodeBuffer;function Decoder(options){if(!(this instanceof Decoder))return new Decoder(options);DecodeBuffer.call(this,options)}Decoder.prototype=new DecodeBuffer;EventLite.mixin(Decoder.prototype);Decoder.prototype.decode=function(chunk){if(arguments.length)this.write(chunk);this.flush()};Decoder.prototype.push=function(chunk){this.emit("data",chunk)};Decoder.prototype.end=function(chunk){this.decode(chunk);this.emit("end")}},{"./decode-buffer":18,"event-lite":4}],21:[function(require,module,exports){exports.EncodeBuffer=EncodeBuffer;var preset=require("./write-core").preset;var FlexEncoder=require("./flex-buffer").FlexEncoder;FlexEncoder.mixin(EncodeBuffer.prototype);function EncodeBuffer(options){if(!(this instanceof EncodeBuffer))return new EncodeBuffer(options);if(options){this.options=options;if(options.codec){var codec=this.codec=options.codec;if(codec.bufferish)this.bufferish=codec.bufferish}}}EncodeBuffer.prototype.codec=preset;EncodeBuffer.prototype.write=function(input){this.codec.encode(this,input)}},{"./flex-buffer":28,"./write-core":32}],22:[function(require,module,exports){exports.encode=encode;var EncodeBuffer=require("./encode-buffer").EncodeBuffer;function encode(input,options){var encoder=new EncodeBuffer(options);encoder.write(input);return encoder.read()}},{"./encode-buffer":21}],23:[function(require,module,exports){exports.Encoder=Encoder;var EventLite=require("event-lite");var EncodeBuffer=require("./encode-buffer").EncodeBuffer;function Encoder(options){if(!(this instanceof Encoder))return new Encoder(options);EncodeBuffer.call(this,options)}Encoder.prototype=new EncodeBuffer;EventLite.mixin(Encoder.prototype);Encoder.prototype.encode=function(chunk){this.write(chunk);this.emit("data",this.read())};Encoder.prototype.end=function(chunk){if(arguments.length)this.encode(chunk);this.flush();this.emit("end")}},{"./encode-buffer":21,"event-lite":4}],24:[function(require,module,exports){exports.ExtBuffer=ExtBuffer;var Bufferish=require("./bufferish");function ExtBuffer(buffer,type){if(!(this instanceof ExtBuffer))return new ExtBuffer(buffer,type);this.buffer=Bufferish.from(buffer);this.type=type}},{"./bufferish":15}],25:[function(require,module,exports){exports.setExtPackers=setExtPackers;var Bufferish=require("./bufferish");var Buffer=Bufferish.global;var packTypedArray=Bufferish.Uint8Array.from;var _encode;var ERROR_COLUMNS={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function setExtPackers(codec){codec.addExtPacker(14,Error,[packError,encode]);codec.addExtPacker(1,EvalError,[packError,encode]);codec.addExtPacker(2,RangeError,[packError,encode]);codec.addExtPacker(3,ReferenceError,[packError,encode]);codec.addExtPacker(4,SyntaxError,[packError,encode]);codec.addExtPacker(5,TypeError,[packError,encode]);codec.addExtPacker(6,URIError,[packError,encode]);codec.addExtPacker(10,RegExp,[packRegExp,encode]);codec.addExtPacker(11,Boolean,[packValueOf,encode]);codec.addExtPacker(12,String,[packValueOf,encode]);codec.addExtPacker(13,Date,[Number,encode]);codec.addExtPacker(15,Number,[packValueOf,encode]);if("undefined"!==typeof Uint8Array){codec.addExtPacker(17,Int8Array,packTypedArray);codec.addExtPacker(18,Uint8Array,packTypedArray);codec.addExtPacker(19,Int16Array,packTypedArray);codec.addExtPacker(20,Uint16Array,packTypedArray);codec.addExtPacker(21,Int32Array,packTypedArray);codec.addExtPacker(22,Uint32Array,packTypedArray);codec.addExtPacker(23,Float32Array,packTypedArray);if("undefined"!==typeof Float64Array){codec.addExtPacker(24,Float64Array,packTypedArray)}if("undefined"!==typeof Uint8ClampedArray){codec.addExtPacker(25,Uint8ClampedArray,packTypedArray)}codec.addExtPacker(26,ArrayBuffer,packTypedArray);codec.addExtPacker(29,DataView,packTypedArray)}if(Bufferish.hasBuffer){codec.addExtPacker(27,Buffer,Bufferish.from)}}function encode(input){if(!_encode)_encode=require("./encode").encode;return _encode(input)}function packValueOf(value){return value.valueOf()}function packRegExp(value){value=RegExp.prototype.toString.call(value).split("/");value.shift();var out=[value.pop()];out.unshift(value.join("/"));return out}function packError(value){var out={};for(var key in ERROR_COLUMNS){out[key]=value[key]}return out}},{"./bufferish":15,"./encode":22}],26:[function(require,module,exports){exports.setExtUnpackers=setExtUnpackers;var Bufferish=require("./bufferish");var Buffer=Bufferish.global;var _decode;var ERROR_COLUMNS={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function setExtUnpackers(codec){codec.addExtUnpacker(14,[decode,unpackError(Error)]);codec.addExtUnpacker(1,[decode,unpackError(EvalError)]);codec.addExtUnpacker(2,[decode,unpackError(RangeError)]);codec.addExtUnpacker(3,[decode,unpackError(ReferenceError)]);codec.addExtUnpacker(4,[decode,unpackError(SyntaxError)]);codec.addExtUnpacker(5,[decode,unpackError(TypeError)]);codec.addExtUnpacker(6,[decode,unpackError(URIError)]);codec.addExtUnpacker(10,[decode,unpackRegExp]);codec.addExtUnpacker(11,[decode,unpackClass(Boolean)]);codec.addExtUnpacker(12,[decode,unpackClass(String)]);codec.addExtUnpacker(13,[decode,unpackClass(Date)]);codec.addExtUnpacker(15,[decode,unpackClass(Number)]);if("undefined"!==typeof Uint8Array){codec.addExtUnpacker(17,unpackClass(Int8Array));codec.addExtUnpacker(18,unpackClass(Uint8Array));codec.addExtUnpacker(19,[unpackArrayBuffer,unpackClass(Int16Array)]);codec.addExtUnpacker(20,[unpackArrayBuffer,unpackClass(Uint16Array)]);codec.addExtUnpacker(21,[unpackArrayBuffer,unpackClass(Int32Array)]);codec.addExtUnpacker(22,[unpackArrayBuffer,unpackClass(Uint32Array)]);codec.addExtUnpacker(23,[unpackArrayBuffer,unpackClass(Float32Array)]);if("undefined"!==typeof Float64Array){codec.addExtUnpacker(24,[unpackArrayBuffer,unpackClass(Float64Array)])}if("undefined"!==typeof Uint8ClampedArray){codec.addExtUnpacker(25,unpackClass(Uint8ClampedArray))}codec.addExtUnpacker(26,unpackArrayBuffer);codec.addExtUnpacker(29,[unpackArrayBuffer,unpackClass(DataView)])}if(Bufferish.hasBuffer){codec.addExtUnpacker(27,unpackClass(Buffer))}}function decode(input){if(!_decode)_decode=require("./decode").decode;return _decode(input)}function unpackRegExp(value){return RegExp.apply(null,value)}function unpackError(Class){return function(value){var out=new Class;for(var key in ERROR_COLUMNS){out[key]=value[key]}return out}}function unpackClass(Class){return function(value){return new Class(value)}}function unpackArrayBuffer(value){return new Uint8Array(value).buffer}},{"./bufferish":15,"./decode":19}],27:[function(require,module,exports){require("./read-core");require("./write-core");exports.createCodec=require("./codec-base").createCodec},{"./codec-base":16,"./read-core":29,"./write-core":32}],28:[function(require,module,exports){exports.FlexDecoder=FlexDecoder;exports.FlexEncoder=FlexEncoder;var Bufferish=require("./bufferish");var MIN_BUFFER_SIZE=2048;var MAX_BUFFER_SIZE=65536;var BUFFER_SHORTAGE="BUFFER_SHORTAGE";function FlexDecoder(){if(!(this instanceof FlexDecoder))return new FlexDecoder}function FlexEncoder(){if(!(this instanceof FlexEncoder))return new FlexEncoder}FlexDecoder.mixin=mixinFactory(getDecoderMethods());FlexDecoder.mixin(FlexDecoder.prototype);FlexEncoder.mixin=mixinFactory(getEncoderMethods());FlexEncoder.mixin(FlexEncoder.prototype);function getDecoderMethods(){return{bufferish:Bufferish,write:write,fetch:fetch,flush:flush,push:push,pull:pull,read:read,reserve:reserve,offset:0};function write(chunk){var prev=this.offset?Bufferish.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=prev?chunk?this.bufferish.concat([prev,chunk]):prev:chunk;this.offset=0}function flush(){while(this.offset<this.buffer.length){var start=this.offset;var value;try{value=this.fetch()}catch(e){if(e&&e.message!=BUFFER_SHORTAGE)throw e;this.offset=start;break}this.push(value)}}function reserve(length){var start=this.offset;var end=start+length;if(end>this.buffer.length)throw new Error(BUFFER_SHORTAGE);this.offset=end;return start}}function getEncoderMethods(){return{bufferish:Bufferish,write:write,fetch:fetch,flush:flush,push:push,pull:pull,read:read,reserve:reserve,send:send,maxBufferSize:MAX_BUFFER_SIZE,minBufferSize:MIN_BUFFER_SIZE,offset:0,start:0};function fetch(){var start=this.start;if(start<this.offset){var end=this.start=this.offset;return Bufferish.prototype.slice.call(this.buffer,start,end)}}function flush(){while(this.start<this.offset){var value=this.fetch();if(value)this.push(value)}}function pull(){var buffers=this.buffers||(this.buffers=[]);var chunk=buffers.length>1?this.bufferish.concat(buffers):buffers[0];buffers.length=0;return chunk}function reserve(length){var req=length|0;if(this.buffer){var size=this.buffer.length;var start=this.offset|0;var end=start+req;if(end<size){this.offset=end;return start}this.flush();length=Math.max(length,Math.min(size*2,this.maxBufferSize))}length=Math.max(length,this.minBufferSize);this.buffer=this.bufferish.alloc(length);this.start=0;this.offset=req;return 0}function send(buffer){var length=buffer.length;if(length>this.minBufferSize){this.flush();this.push(buffer)}else{var offset=this.reserve(length);Bufferish.prototype.copy.call(buffer,this.buffer,offset)}}}function write(){throw new Error("method not implemented: write()")}function fetch(){throw new Error("method not implemented: fetch()")}function read(){var length=this.buffers&&this.buffers.length;if(!length)return this.fetch();this.flush();return this.pull()}function push(chunk){var buffers=this.buffers||(this.buffers=[]);buffers.push(chunk)}function pull(){var buffers=this.buffers||(this.buffers=[]);return buffers.shift()}function mixinFactory(source){return mixin;function mixin(target){for(var key in source){target[key]=source[key]}return target}}},{"./bufferish":15}],29:[function(require,module,exports){var ExtBuffer=require("./ext-buffer").ExtBuffer;var ExtUnpacker=require("./ext-unpacker");var readUint8=require("./read-format").readUint8;var ReadToken=require("./read-token");var CodecBase=require("./codec-base");CodecBase.install({addExtUnpacker:addExtUnpacker,getExtUnpacker:getExtUnpacker,init:init});exports.preset=init.call(CodecBase.preset);function getDecoder(options){var readToken=ReadToken.getReadToken(options);return decode;function decode(decoder){var type=readUint8(decoder);var func=readToken[type];if(!func)throw new Error("Invalid type: "+(type?"0x"+type.toString(16):type));return func(decoder)}}function init(){var options=this.options;this.decode=getDecoder(options);if(options&&options.preset){ExtUnpacker.setExtUnpackers(this)}return this}function addExtUnpacker(etype,unpacker){var unpackers=this.extUnpackers||(this.extUnpackers=[]);unpackers[etype]=CodecBase.filter(unpacker)}function getExtUnpacker(type){var unpackers=this.extUnpackers||(this.extUnpackers=[]);return unpackers[type]||extUnpacker;function extUnpacker(buffer){return new ExtBuffer(buffer,type)}}},{"./codec-base":16,"./ext-buffer":24,"./ext-unpacker":26,"./read-format":30,"./read-token":31}],30:[function(require,module,exports){var ieee754=require("ieee754");var Int64Buffer=require("int64-buffer");var Uint64BE=Int64Buffer.Uint64BE;var Int64BE=Int64Buffer.Int64BE;exports.getReadFormat=getReadFormat;exports.readUint8=uint8;var Bufferish=require("./bufferish");var BufferProto=require("./bufferish-proto");var HAS_MAP="undefined"!==typeof Map;var NO_ASSERT=true;function getReadFormat(options){var binarraybuffer=Bufferish.hasArrayBuffer&&options&&options.binarraybuffer;var int64=options&&options.int64;var usemap=HAS_MAP&&options&&options.usemap;var readFormat={map:usemap?map_to_map:map_to_obj,array:array,str:str,bin:binarraybuffer?bin_arraybuffer:bin_buffer,ext:ext,uint8:uint8,uint16:uint16,uint32:uint32,uint64:read(8,int64?readUInt64BE_int64:readUInt64BE),int8:int8,int16:int16,int32:int32,int64:read(8,int64?readInt64BE_int64:readInt64BE),float32:read(4,readFloatBE),float64:read(8,readDoubleBE)};return readFormat}function map_to_obj(decoder,len){var value={};var i;var k=new Array(len);var v=new Array(len);var decode=decoder.codec.decode;for(i=0;i<len;i++){k[i]=decode(decoder);v[i]=decode(decoder)}for(i=0;i<len;i++){value[k[i]]=v[i]}return value}function map_to_map(decoder,len){var value=new Map;var i;var k=new Array(len);var v=new Array(len);var decode=decoder.codec.decode;for(i=0;i<len;i++){k[i]=decode(decoder);v[i]=decode(decoder)}for(i=0;i<len;i++){value.set(k[i],v[i])}return value}function array(decoder,len){var value=new Array(len);var decode=decoder.codec.decode;for(var i=0;i<len;i++){value[i]=decode(decoder)}return value}function str(decoder,len){var start=decoder.reserve(len);var end=start+len;return BufferProto.toString.call(decoder.buffer,"utf-8",start,end)}function bin_buffer(decoder,len){var start=decoder.reserve(len);var end=start+len;var buf=BufferProto.slice.call(decoder.buffer,start,end);return Bufferish.from(buf)}function bin_arraybuffer(decoder,len){var start=decoder.reserve(len);var end=start+len;var buf=BufferProto.slice.call(decoder.buffer,start,end);return Bufferish.Uint8Array.from(buf).buffer}function ext(decoder,len){var start=decoder.reserve(len+1);var type=decoder.buffer[start++];var end=start+len;var unpack=decoder.codec.getExtUnpacker(type);if(!unpack)throw new Error("Invalid ext type: "+(type?"0x"+type.toString(16):type));var buf=BufferProto.slice.call(decoder.buffer,start,end);return unpack(buf)}function uint8(decoder){var start=decoder.reserve(1);return decoder.buffer[start]}function int8(decoder){var start=decoder.reserve(1);var value=decoder.buffer[start];return value&128?value-256:value}function uint16(decoder){var start=decoder.reserve(2);var buffer=decoder.buffer;return buffer[start++]<<8|buffer[start]}function int16(decoder){var start=decoder.reserve(2);var buffer=decoder.buffer;var value=buffer[start++]<<8|buffer[start];return value&32768?value-65536:value}function uint32(decoder){var start=decoder.reserve(4);var buffer=decoder.buffer;return buffer[start++]*16777216+(buffer[start++]<<16)+(buffer[start++]<<8)+buffer[start]}function int32(decoder){var start=decoder.reserve(4);var buffer=decoder.buffer;return buffer[start++]<<24|buffer[start++]<<16|buffer[start++]<<8|buffer[start]}function read(len,method){return function(decoder){var start=decoder.reserve(len);return method.call(decoder.buffer,start,NO_ASSERT)}}function readUInt64BE(start){return new Uint64BE(this,start).toNumber()}function readInt64BE(start){return new Int64BE(this,start).toNumber()}function readUInt64BE_int64(start){return new Uint64BE(this,start)}function readInt64BE_int64(start){return new Int64BE(this,start)}function readFloatBE(start){return ieee754.read(this,start,false,23,4)}function readDoubleBE(start){return ieee754.read(this,start,false,52,8)}},{"./bufferish":15,"./bufferish-proto":13,ieee754:5,"int64-buffer":6}],31:[function(require,module,exports){var ReadFormat=require("./read-format");exports.getReadToken=getReadToken;function getReadToken(options){var format=ReadFormat.getReadFormat(options);if(options&&options.useraw){return init_useraw(format)}else{return init_token(format)}}function init_token(format){var i;var token=new Array(256);for(i=0;i<=127;i++){token[i]=constant(i)}for(i=128;i<=143;i++){token[i]=fix(i-128,format.map)}for(i=144;i<=159;i++){token[i]=fix(i-144,format.array)}for(i=160;i<=191;i++){token[i]=fix(i-160,format.str)}token[192]=constant(null);token[193]=null;token[194]=constant(false);token[195]=constant(true);token[196]=flex(format.uint8,format.bin);token[197]=flex(format.uint16,format.bin);token[198]=flex(format.uint32,format.bin);token[199]=flex(format.uint8,format.ext);token[200]=flex(format.uint16,format.ext);token[201]=flex(format.uint32,format.ext);token[202]=format.float32;token[203]=format.float64;token[204]=format.uint8;token[205]=format.uint16;token[206]=format.uint32;token[207]=format.uint64;token[208]=format.int8;token[209]=format.int16;token[210]=format.int32;token[211]=format.int64;token[212]=fix(1,format.ext);token[213]=fix(2,format.ext);token[214]=fix(4,format.ext);token[215]=fix(8,format.ext);token[216]=fix(16,format.ext);token[217]=flex(format.uint8,format.str);token[218]=flex(format.uint16,format.str);token[219]=flex(format.uint32,format.str);token[220]=flex(format.uint16,format.array);token[221]=flex(format.uint32,format.array);token[222]=flex(format.uint16,format.map);token[223]=flex(format.uint32,format.map);for(i=224;i<=255;i++){token[i]=constant(i-256)}return token}function init_useraw(format){var i;var token=init_token(format).slice();token[217]=token[196];token[218]=token[197];token[219]=token[198];for(i=160;i<=191;i++){token[i]=fix(i-160,format.bin)}return token}function constant(value){return function(){return value}}function flex(lenFunc,decodeFunc){return function(decoder){var len=lenFunc(decoder);return decodeFunc(decoder,len)}}function fix(len,method){return function(decoder){return method(decoder,len)}}},{"./read-format":30}],32:[function(require,module,exports){var ExtBuffer=require("./ext-buffer").ExtBuffer;var ExtPacker=require("./ext-packer");var WriteType=require("./write-type");var CodecBase=require("./codec-base");CodecBase.install({addExtPacker:addExtPacker,getExtPacker:getExtPacker,init:init});exports.preset=init.call(CodecBase.preset);function getEncoder(options){var writeType=WriteType.getWriteType(options);return encode;function encode(encoder,value){var func=writeType[typeof value];if(!func)throw new Error('Unsupported type "'+typeof value+'": '+value);func(encoder,value)}}function init(){var options=this.options;this.encode=getEncoder(options);if(options&&options.preset){ExtPacker.setExtPackers(this)}return this}function addExtPacker(etype,Class,packer){packer=CodecBase.filter(packer);var name=Class.name;if(name&&name!=="Object"){var packers=this.extPackers||(this.extPackers={});packers[name]=extPacker}else{var list=this.extEncoderList||(this.extEncoderList=[]);list.unshift([Class,extPacker])}function extPacker(value){if(packer)value=packer(value);return new ExtBuffer(value,etype)}}function getExtPacker(value){var packers=this.extPackers||(this.extPackers={});var c=value.constructor;var e=c&&c.name&&packers[c.name];if(e)return e;var list=this.extEncoderList||(this.extEncoderList=[]);var len=list.length;for(var i=0;i<len;i++){var pair=list[i];if(c===pair[0])return pair[1]}}},{"./codec-base":16,"./ext-buffer":24,"./ext-packer":25,"./write-type":34}],33:[function(require,module,exports){var ieee754=require("ieee754");var Int64Buffer=require("int64-buffer");var Uint64BE=Int64Buffer.Uint64BE;var Int64BE=Int64Buffer.Int64BE;var uint8=require("./write-uint8").uint8;var Bufferish=require("./bufferish");var Buffer=Bufferish.global;var IS_BUFFER_SHIM=Bufferish.hasBuffer&&"TYPED_ARRAY_SUPPORT"in Buffer;var NO_TYPED_ARRAY=IS_BUFFER_SHIM&&!Buffer.TYPED_ARRAY_SUPPORT;var Buffer_prototype=Bufferish.hasBuffer&&Buffer.prototype||{};exports.getWriteToken=getWriteToken;function getWriteToken(options){if(options&&options.uint8array){return init_uint8array()}else if(NO_TYPED_ARRAY||Bufferish.hasBuffer&&options&&options.safe){return init_safe()}else{return init_token()}}function init_uint8array(){var token=init_token();token[202]=writeN(202,4,writeFloatBE);token[203]=writeN(203,8,writeDoubleBE);return token}function init_token(){var token=uint8.slice();token[196]=write1(196);token[197]=write2(197);token[198]=write4(198);token[199]=write1(199);token[200]=write2(200);token[201]=write4(201);token[202]=writeN(202,4,Buffer_prototype.writeFloatBE||writeFloatBE,true);token[203]=writeN(203,8,Buffer_prototype.writeDoubleBE||writeDoubleBE,true);token[204]=write1(204);token[205]=write2(205);token[206]=write4(206);token[207]=writeN(207,8,writeUInt64BE);token[208]=write1(208);token[209]=write2(209);token[210]=write4(210);token[211]=writeN(211,8,writeInt64BE);token[217]=write1(217);token[218]=write2(218);token[219]=write4(219);token[220]=write2(220);token[221]=write4(221);token[222]=write2(222);token[223]=write4(223);return token}function init_safe(){var token=uint8.slice();token[196]=writeN(196,1,Buffer.prototype.writeUInt8);token[197]=writeN(197,2,Buffer.prototype.writeUInt16BE);token[198]=writeN(198,4,Buffer.prototype.writeUInt32BE);token[199]=writeN(199,1,Buffer.prototype.writeUInt8);token[200]=writeN(200,2,Buffer.prototype.writeUInt16BE);token[201]=writeN(201,4,Buffer.prototype.writeUInt32BE);token[202]=writeN(202,4,Buffer.prototype.writeFloatBE);token[203]=writeN(203,8,Buffer.prototype.writeDoubleBE);token[204]=writeN(204,1,Buffer.prototype.writeUInt8);token[205]=writeN(205,2,Buffer.prototype.writeUInt16BE);token[206]=writeN(206,4,Buffer.prototype.writeUInt32BE);token[207]=writeN(207,8,writeUInt64BE);token[208]=writeN(208,1,Buffer.prototype.writeInt8);token[209]=writeN(209,2,Buffer.prototype.writeInt16BE);token[210]=writeN(210,4,Buffer.prototype.writeInt32BE);token[211]=writeN(211,8,writeInt64BE);token[217]=writeN(217,1,Buffer.prototype.writeUInt8);token[218]=writeN(218,2,Buffer.prototype.writeUInt16BE);token[219]=writeN(219,4,Buffer.prototype.writeUInt32BE);token[220]=writeN(220,2,Buffer.prototype.writeUInt16BE);token[221]=writeN(221,4,Buffer.prototype.writeUInt32BE);token[222]=writeN(222,2,Buffer.prototype.writeUInt16BE);token[223]=writeN(223,4,Buffer.prototype.writeUInt32BE);return token}function write1(type){return function(encoder,value){var offset=encoder.reserve(2);var buffer=encoder.buffer;buffer[offset++]=type;buffer[offset]=value}}function write2(type){return function(encoder,value){var offset=encoder.reserve(3);var buffer=encoder.buffer;buffer[offset++]=type;buffer[offset++]=value>>>8;buffer[offset]=value}}function write4(type){return function(encoder,value){var offset=encoder.reserve(5);var buffer=encoder.buffer;buffer[offset++]=type;buffer[offset++]=value>>>24;buffer[offset++]=value>>>16;buffer[offset++]=value>>>8;buffer[offset]=value}}function writeN(type,len,method,noAssert){return function(encoder,value){var offset=encoder.reserve(len+1);encoder.buffer[offset++]=type;method.call(encoder.buffer,value,offset,noAssert)}}function writeUInt64BE(value,offset){new Uint64BE(this,offset,value)}function writeInt64BE(value,offset){new Int64BE(this,offset,value)}function writeFloatBE(value,offset){ieee754.write(this,value,offset,false,23,4)}function writeDoubleBE(value,offset){ieee754.write(this,value,offset,false,52,8)}},{"./bufferish":15,"./write-uint8":35,ieee754:5,"int64-buffer":6}],34:[function(require,module,exports){var IS_ARRAY=require("isarray");var Int64Buffer=require("int64-buffer");var Uint64BE=Int64Buffer.Uint64BE;var Int64BE=Int64Buffer.Int64BE;var Bufferish=require("./bufferish");var BufferProto=require("./bufferish-proto");var WriteToken=require("./write-token");var uint8=require("./write-uint8").uint8;var ExtBuffer=require("./ext-buffer").ExtBuffer;var HAS_UINT8ARRAY="undefined"!==typeof Uint8Array;var HAS_MAP="undefined"!==typeof Map;var extmap=[];extmap[1]=212;extmap[2]=213;extmap[4]=214;extmap[8]=215;extmap[16]=216;exports.getWriteType=getWriteType;function getWriteType(options){var token=WriteToken.getWriteToken(options);var useraw=options&&options.useraw;var binarraybuffer=HAS_UINT8ARRAY&&options&&options.binarraybuffer;var isBuffer=binarraybuffer?Bufferish.isArrayBuffer:Bufferish.isBuffer;var bin=binarraybuffer?bin_arraybuffer:bin_buffer;var usemap=HAS_MAP&&options&&options.usemap;var map=usemap?map_to_map:obj_to_map;var writeType={boolean:bool,function:nil,number:number,object:useraw?object_raw:object,string:_string(useraw?raw_head_size:str_head_size),symbol:nil,undefined:nil};return writeType;function bool(encoder,value){var type=value?195:194;token[type](encoder,value)}function number(encoder,value){var ivalue=value|0;var type;if(value!==ivalue){type=203;token[type](encoder,value);return}else if(-32<=ivalue&&ivalue<=127){type=ivalue&255}else if(0<=ivalue){type=ivalue<=255?204:ivalue<=65535?205:206}else{type=-128<=ivalue?208:-32768<=ivalue?209:210}token[type](encoder,ivalue)}function uint64(encoder,value){var type=207;token[type](encoder,value.toArray())}function int64(encoder,value){var type=211;token[type](encoder,value.toArray())}function str_head_size(length){return length<32?1:length<=255?2:length<=65535?3:5}function raw_head_size(length){return length<32?1:length<=65535?3:5}function _string(head_size){return string;function string(encoder,value){var length=value.length;var maxsize=5+length*3;encoder.offset=encoder.reserve(maxsize);var buffer=encoder.buffer;var expected=head_size(length);var start=encoder.offset+expected;length=BufferProto.write.call(buffer,value,start);var actual=head_size(length);if(expected!==actual){var targetStart=start+actual-expected;var end=start+length;BufferProto.copy.call(buffer,buffer,targetStart,start,end)}var type=actual===1?160+length:actual<=3?215+actual:219;token[type](encoder,length);encoder.offset+=length}}function object(encoder,value){if(value===null)return nil(encoder,value);if(isBuffer(value))return bin(encoder,value);if(IS_ARRAY(value))return array(encoder,value);if(Uint64BE.isUint64BE(value))return uint64(encoder,value);if(Int64BE.isInt64BE(value))return int64(encoder,value);var packer=encoder.codec.getExtPacker(value);if(packer)value=packer(value);if(value instanceof ExtBuffer)return ext(encoder,value);map(encoder,value)}function object_raw(encoder,value){if(isBuffer(value))return raw(encoder,value);object(encoder,value)}function nil(encoder,value){var type=192;token[type](encoder,value)}function array(encoder,value){var length=value.length;var type=length<16?144+length:length<=65535?220:221;token[type](encoder,length);var encode=encoder.codec.encode;for(var i=0;i<length;i++){encode(encoder,value[i])}}function bin_buffer(encoder,value){var length=value.length;var type=length<255?196:length<=65535?197:198;token[type](encoder,length);encoder.send(value)}function bin_arraybuffer(encoder,value){bin_buffer(encoder,new Uint8Array(value))}function ext(encoder,value){var buffer=value.buffer;var length=buffer.length;var type=extmap[length]||(length<255?199:length<=65535?200:201);token[type](encoder,length);uint8[value.type](encoder);encoder.send(buffer)}function obj_to_map(encoder,value){var keys=Object.keys(value);var length=keys.length;var type=length<16?128+length:length<=65535?222:223;token[type](encoder,length);var encode=encoder.codec.encode;keys.forEach(function(key){encode(encoder,key);encode(encoder,value[key])})}function map_to_map(encoder,value){if(!(value instanceof Map))return obj_to_map(encoder,value);var length=value.size;var type=length<16?128+length:length<=65535?222:223;token[type](encoder,length);var encode=encoder.codec.encode;value.forEach(function(val,key,m){encode(encoder,key);encode(encoder,val)})}function raw(encoder,value){var length=value.length;var type=length<32?160+length:length<=65535?218:219;token[type](encoder,length);encoder.send(value)}}},{"./bufferish":15,"./bufferish-proto":13,"./ext-buffer":24,"./write-token":33,"./write-uint8":35,"int64-buffer":6,isarray:7}],35:[function(require,module,exports){var constant=exports.uint8=new Array(256);for(var i=0;i<=255;i++){constant[i]=write0(i)}function write0(type){return function(encoder){var offset=encoder.reserve(1);encoder.buffer[offset]=type}}},{}]},{},[1])(1)});
